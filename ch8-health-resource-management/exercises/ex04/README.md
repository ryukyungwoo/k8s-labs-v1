# 실습 4: Requests & Limits - 최소 보장과 최대 한도 설정하기

### 🎯 학습 목표
1. Pod에 자원 제한(`limits`)이 없을 때 발생할 수 있는 위험성을 이해한다.
2. Pod가 사용할 메모리의 최대 상한선을 `limits`로 설정하고, 이를 초과했을 때 쿠버네티스가 어떻게 Pod를 강제 종료(`OOMKilled`)시켜 클러스터 전체를 보호하는지 확인한다.
3. `kubectl top pod` 명령어를 사용하여 Pod의 실시간 자원 사용량을 모니터링하는 방법을 익힌다.

### 📜 실습 시나리오
1.  **호출 시 메모리를 점유하는** 간단한 웹 서버를 만든다.
2.  **`metrics-server` 애드온**을 활성화하여 Pod의 자원 사용량을 측정할 수 있도록 준비한다.
3.  **자원 제한이 없는 Pod**를 배포하고, 메모리를 크게 할당해도 죽지 않는 것을 확인한다. (실제 운영 환경에서는 Node 전체를 위험에 빠뜨릴 수 있음을 설명)
4.  **`memory limit`이 128Mi로 낮게 설정된 Pod**를 배포한다.
    -   제한보다 적은 양의 메모리(50Mi)를 할당하는 요청을 보내고, 정상적으로 처리되는 것을 확인한다.
    -   제한보다 많은 양의 메모리(200Mi)를 할당하는 요청을 보내자, Pod가 `OOMKilled` 상태가 되며 재시작되는 것을 관찰한다.

### ✅ 확인 포인트
- `kubectl top pod` 명령어로 Pod의 `CPU`와 `MEMORY` 사용량 확인.
- 메모리 제한을 초과하는 요청을 보냈을 때 `curl`이 실패하는 현상.
- `kubectl get pod -w`로 `STATUS`가 `OOMKilled`로 바뀌고 `RESTARTS`가 증가하는 모습.
- `kubectl describe pod`로 `Reason: OOMKilled` 이벤트를 직접 확인.